(this["webpackJsonpcharger-emulator-interface"]=this["webpackJsonpcharger-emulator-interface"]||[]).push([[0],{39:function(e,t,s){},41:function(e,t,s){},45:function(e,t,s){},46:function(e,t,s){},49:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(2),a=s.n(i),r=s(29),o=s.n(r),c=(s(39),s(8)),l=s.n(c),d=s(15),u=s(19),h=s(17),p=s(6),m=s(24),g=s(22),j=s(65),v=s(31),b=s(64),O=(s(41),function(e){Object(m.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).theme=Object(j.a)(Object(v.a)({typography:{h1:{fontSize:200},h2:{fontSize:15}}})),n.portReader={},n.portWriter={},n.rawData="",n.role="",n.state={printOutCom:"",toggleToRefresh:!1,role:"PEV",checked:!1,percentage:0,started:!1,continuousTest:!1},n.queryInterval={},n.initializePEVStrings(),n.pevSendStartCommand=n.pevSendStartCommand.bind(Object(p.a)(n)),n.pevSendStopCommand=n.pevSendStopCommand.bind(Object(p.a)(n)),n.handleContToggleSwitch=n.handleContToggleSwitch.bind(Object(p.a)(n)),n.showDetailedProgress=n.showDetailedProgress.bind(Object(p.a)(n)),n.showLinkPanel=n.showLinkPanel.bind(Object(p.a)(n)),n.setContinuosState=n.setContinuosState.bind(Object(p.a)(n)),n.resetLinkMeasurementsList=n.resetLinkMeasurementsList.bind(Object(p.a)(n)),n.linkMeasurements=[],n.timeoutStartInterval={},n.timeoutStopInterval={},n}return Object(h.a)(s,[{key:"pevSendStartCommand",value:function(){console.log("Send Start Command");var e=new Uint8Array([32]);this.portWriter.write(e).then((function(e){})),this.setState({printOutCom:this.printOutCom,toggleToRefresh:this.toggleToRefresh,role:this.state.role,percentage:0,started:!0,continuousTest:this.state.continuousTest})}},{key:"handleContToggleSwitch",value:function(e){}},{key:"pevSendStopCommand",value:function(){var e=new Uint8Array([100]);this.portWriter.write(e).then((function(e){})),clearInterval(this.timeoutStartInterval),clearInterval(this.timeoutStopInterval),this.initializePEVStrings(),this.setState({printOutCom:this.printOutCom,toggleToRefresh:!0,role:this.role,percentage:0,started:!1,continuousTest:this.state.continuousTest})}},{key:"initializePEVStrings",value:function(){this.pevStrings=[{details:"PIB image reading completed OK",display:"PIB image reading completed OK",found:!1,warning:!1},{details:"CM_SLAC_PARAM.REQ sent",display:"CM_SLAC_PARAM.REQ sent",found:!1,warning:!1},{details:"CM_SLAC_PARAM.CNF received",display:"CM_SLAC_PARAM.CNF received",found:!1,warning:!1},{details:"CM_START_ATTEN_CHAR.IND sent",display:"CM_START_ATTEN_CHAR.IND sent",found:!1,warning:!1},{details:"CM_MNBC_SOUND.IND sent",display:"CM_MNBC_SOUND.IND sent",found:!1,warning:!1},{details:"CM_ATTEN_CHAR.IND received",display:"CM_ATTEN_CHAR.IND received",found:!1,warning:!1},{details:"CM_ATTEN_CHAR.RSP sent",display:"CM_ATTEN_CHAR.RSP sent",found:!1,warning:!1},{details:"CM_VALIDATE.REQ sent",display:"CM_VALIDATE.REQ sent",found:!1,warning:!1},{details:"CM_VALIDATE.CNF received. -Charger Ready-",display:"Charger Ready",found:!1,warning:!1},{details:"CM_VALIDATE.CNF received. -Charger Success-",display:"Charger Success",found:!1,warning:!1},{details:"CM_SET_KEY.CNF received",display:"CM_SET_KEY.CNF received",found:!1,warning:!1},{details:"New keys set",display:"New keys set",found:!1,warning:!1},{details:"Link Measurement:",display:"Link Measurement:",found:!1,warning:!1},{details:"Sending IPv6.",display:"Sending IPv6.",found:!1,warning:!1},{details:"IPv6 Message is received",display:"IPv6 Message is received",found:!1,warning:!1},{details:"TIMEOUT",display:"Timeout Occured",found:!1,warning:!0},{details:"TIMEOUT FOR CONNECT",display:"Timeout To Reconnect",found:!1,warning:!1}]}},{key:"setTimedoutStartCommand",value:function(e){var t=this,s=e;console.log("setTimedoutStartCommand | begin"),this.timeoutStartInterval=setInterval((function(){s-- >3?(t.pevStrings[16].display="Reconnecting in "+s+" sec(s).",t.pevStrings[16].found=!0,console.log("setTimedoutStartCommand | set text to ",t.pevStrings[16].display),t.setState({printOutCom:t.printOutCom,toggleToRefresh:!t.state.toggleToRefresh,role:t.state.role,percentage:t.state.percentage,started:!0,continuousTest:t.state.continuousTest})):(t.pevStrings[16].found=!1,console.log("setTimedoutStartCommand | SEND start"),t.pevSendStartCommand(),t.setState({printOutCom:t.printOutCom,toggleToRefresh:!t.state.toggleToRefresh,role:t.state.role,percentage:t.state.percentage,started:!0,continuousTest:t.state.continuousTest}),clearInterval(t.timeoutStartInterval))}),1e3)}},{key:"setTimedoutStopCommand",value:function(e){var t=this,s=e;this.timeoutStopInterval=setInterval((function(){s-- >0?(t.pevStrings[15].display="Disconnecting in "+s+" sec(s).",t.pevStrings[15].found=!0,console.log("setInterval | set text to ",t.pevStrings[15].display),t.setState({printOutCom:t.printOutCom,toggleToRefresh:!t.state.toggleToRefresh,role:t.state.role,percentage:t.state.percentage,started:!0,continuousTest:t.state.continuousTest})):(console.log("setInterval | SEND Stop"),t.pevSendStopCommand(),t.pevStrings[15].found=!1,t.setTimedoutStartCommand(20),clearInterval(t.timeoutStopInterval))}),1e3)}},{key:"componentDidMount",value:function(){this.OpenReadComPort()}},{key:"ProcessSplittedCommand",value:function(e){if(e.length>5)if(e.includes("ROLE:PEV"))this.role="PEV",clearInterval(this.queryInterval),this.setState({printOutCom:this.printOutCom,toggleToRefresh:this.toggleToRefresh,role:this.role,percentage:this.state.percentage,started:this.state.started,continuousTest:this.state.continuousTest});else if(e.includes("ROLE:EVSE"))this.role="EVSE",clearInterval(this.queryInterval),this.setState({printOutCom:this.printOutCom,toggleToRefresh:this.toggleToRefresh,role:this.role,percentage:this.state.percentage,started:this.state.started,continuousTest:this.state.continuousTest});else{for(var t=!1,s=0;s<this.pevStrings.length;s++)if(e.includes(this.pevStrings[s].details)&&!1===this.pevStrings[s].found){if(this.pevStrings[s].found=!0,t=!0,12===s){var n=e.split(":");n.length>1&&(this.pevStrings[12].display="Link Measurement: "+Number(n[1].trim())+"ms.",this.linkMeasurements.push(n[1].trim()))}else 13===s&&!0===this.state.continuousTest?this.setTimedoutStopCommand(15):0===s&&!0===this.state.continuousTest||15===s&&(console.warn("ProcessSplittedCommand  | this.linkMeasurements.push(Timeout) "),this.linkMeasurements.push("Timeout"),!0===this.state.continuousTest&&this.setTimedoutStopCommand(5));break}if(!0===t){console.warn("OKKKKKKKK");var i=this.state.percentage+1/(this.pevStrings.length-1)*100;i>=90&&(i=100),i=Math.round(i),this.setState({printOutCom:this.printOutCom,toggleToRefresh:!this.state.toggleToRefresh,role:this.role,percentage:i,started:!0,continuousTest:this.state.continuousTest})}}}},{key:"ProcessRawData",value:function(){var e=this,t=this.rawData.split("*");t.length>1&&(t.forEach((function(t){e.ProcessSplittedCommand(t)})),this.rawData=t[t.length-1])}},{key:"ReadValues",value:function(){var e=this;this.portReader.read().then((function(t){console.log("VALUE ",t.value),e.rawData+=new TextDecoder("utf-8").decode(t.value),console.log("rawData ",e.rawData),setTimeout(e.ProcessRawData(),0),e.ReadValues()}))}},{key:"OpenReadComPort",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,s,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("OpenReadComPort | begin"),console.log("Port..",this.props.port),t=this.props.port,e.next=5,t.port.open({baudRate:115200});case 5:this.portReader=t.port.readable.getReader(),this.portWriter=t.port.writable.getWriter(),setTimeout((function(){n.ReadValues()}),0),s=new Uint8Array([114]),this.portWriter.write(s).then((function(e){})),console.log("ask role"),console.log("OpenReadComPort | end");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),Object(h.a)(s,[{key:"resetLinkMeasurementsList",value:function(){this.linkMeasurements=[],this.setState({printOutCom:this.printOutCom,toggleToRefresh:!this.state.toggleToRefresh,role:this.state.role,percentage:this.state.percentage,started:this.state.started,continuousTest:this.state.continuousTest})}},{key:"showDetailedProgress",value:function(){return null!=this.pevStrings&&this.pevStrings.length>0?this.pevStrings.map((function(e,t){return e.found?!1===e.warning?Object(n.jsxs)("p",{children:[e.display,t<15?".......................................OK":""]},"detailed_"+t):Object(n.jsx)("p",{style:{color:"#c20b0b",textShadow:"0 0 0.4em #c20b0b"},id:"warningTextFeature",children:e.display},"detailed_"+t):null})):null}},{key:"showLinkPanel",value:function(){return console.log("Show Link Panel",this.linkMeasurements.length),null!=this.linkMeasurements&&this.linkMeasurements.length>0?Object(n.jsx)("div",{id:"linkpanelid1",children:Object(n.jsx)("div",{className:"ui panel",children:Object(n.jsxs)("div",{className:"ui panel content",children:[this.linkMeasurements.map((function(e,t){return"Timeout"===e?Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{style:{color:"#c20b0b",textShadow:"0 0 0.4em #c20b0b"},children:e},"mykey"+t),Object(n.jsx)("br",{})]},"mydivkey"+t):Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{children:"Link Time"},"mykey"+t)," ",e," ms.",Object(n.jsx)("br",{})]},"mydivkey"+t)})),Object(n.jsxs)("div",{style:{textAlign:"right",justifyContent:"right",float:"right",height:"50px",width:"50px"},children:[" ",Object(n.jsx)("div",{className:"linkMeasurementsReset ",onClick:this.resetLinkMeasurementsList})," "]})]})})}):null}},{key:"setContinuosState",value:function(){this.setState({printOutCom:this.printOutCom,toggleToRefresh:this.state.toggleToRefresh,role:this.state.role,percentage:this.state.percentage,started:this.state.started,continuousTest:!this.state.continuousTest})}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"cs",children:"FoE-Charger"}),Object(n.jsxs)("div",{className:"circle cir",children:[Object(n.jsx)("p",{className:"c",children:"F"}),Object(n.jsx)("div",{className:"circle one"}),Object(n.jsx)("div",{className:"circle two",children:Object(n.jsx)("div",{className:"circle three"})})]}),Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsx)("div",{className:"bar left"}),Object(n.jsx)("div",{className:"bar top"}),Object(n.jsx)("div",{className:"bar right"}),Object(n.jsx)("div",{className:"bar bottom"}),Object(n.jsx)("br",{}),Object(n.jsxs)(b.a,{container:!0,children:[Object(n.jsx)(b.a,{item:!0,xs:2}),Object(n.jsx)(b.a,{item:!0,xs:2,children:Object(n.jsx)("div",{className:"Action_button_1",onClick:this.pevSendStartCommand})}),Object(n.jsx)(b.a,{item:!0,xs:2,children:Object(n.jsx)("div",{className:"Action_button_2",onClick:this.pevSendStopCommand})}),Object(n.jsx)(b.a,{item:!0,xs:2,children:Object(n.jsxs)("div",{style:{marginTop:"20px"},children:[Object(n.jsx)("span",{className:"continuousText",children:"Continuous Test"}),this.state.continuousTest?Object(n.jsx)("div",{style:{marginLeft:"30px"},className:"continuousSelectionSelected",onClick:this.setContinuosState}):Object(n.jsx)("div",{style:{marginLeft:"30px"},className:"continuousSelectionUnselected",onClick:this.setContinuosState})]})}),Object(n.jsx)(b.a,{item:!0,xs:2}),Object(n.jsx)(b.a,{item:!0,xs:2,children:Object(n.jsxs)("div",{className:"parentWheel",children:[Object(n.jsx)("div",{className:"Outer_wheel"}),Object(n.jsx)("div",{className:"Wheel_Base"}),this.state.started?Object(n.jsx)("div",{className:"Ineer_wheel Ineer_wheel_Animation"}):Object(n.jsx)("div",{className:"Ineer_wheel"}),Object(n.jsxs)("div",{className:"Percentage_wheel",children:[Object(n.jsx)("span",{id:"percentage",children:this.state.percentage}),"%"]})]})})]}),Object(n.jsxs)(b.a,{container:!0,children:[Object(n.jsx)(b.a,{item:!0,xs:6,children:this.showDetailedProgress()}),Object(n.jsx)(b.a,{item:!0,xs:6,children:this.showLinkPanel()})]})]})]})}}]),s}(i.Component)),f=s(30),C=s(3);s(45);function x(){return Object(n.jsxs)("div",{className:"bodyWrapper",children:[Object(n.jsx)("header",{children:Object(n.jsxs)("div",{className:"signBlock",children:[Object(n.jsx)("div",{className:"topCover"}),Object(n.jsx)("div",{className:"headerContent",children:Object(n.jsxs)("div",{className:"headerLinks",children:[Object(n.jsx)("h1",{children:"PONTIS EMC"}),Object(n.jsx)("div",{className:"signLinks",children:Object(n.jsx)("h3",{children:"Test Web Interface"})})]})}),Object(n.jsx)("div",{className:"boxEdges1",children:Object(n.jsxs)("div",{className:"boxEdges2",children:[Object(n.jsx)("div",{className:"slider"}),Object(n.jsx)("div",{className:"headerLine"})]})})]})}),Object(n.jsx)("body-container",{}),Object(n.jsx)("footer",{})]})}s(46);var S=function(e){return Object(n.jsx)("div",{children:"Contact Page"})},T=function(e){Object(m.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).state={p1:{id:1,selected:!1,port:{},onClickHandler:n.selectCom1},p2:{id:2,selected:!1,port:{},onClickHandler:n.selectCom2}},n.selectCom1=n.selectCom1.bind(Object(p.a)(n)),n.selectCom2=n.selectCom2.bind(Object(p.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("list of serial ports the website has been granted access to previously",navigator.serial.getPorts()),e.next=3,navigator.serial.getPorts();case 3:2===(t=e.sent).length?this.setState({p1:{id:t[0].id,selected:!0,port:t[0]},p2:{id:t[1].id,selected:!1,port:t[1]}}):1===t.length&&this.setState({p1:{id:t[0].id,selected:!0,port:t[0]},p2:this.state.p1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"AskUserForComport",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=1===e.t0?4:2===e.t0?11:17;break;case 4:if(this.state.p1.selected){e.next=10;break}return console.log("list of serial ports the website has been granted access to previously",navigator.serial.getPorts()),e.next=8,navigator.serial.requestPort();case 8:s=e.sent,this.setState({p1:{id:this.state.p1.id,selected:!0,port:s},p2:this.state.p2});case 10:return e.abrupt("break",19);case 11:if(this.state.p2.selected){e.next=16;break}return e.next=14,navigator.serial.requestPort();case 14:n=e.sent,this.setState({p1:this.state.p1,p2:{id:this.state.p2.id,selected:!0,port:n}});case 16:return e.abrupt("break",19);case 17:return console.error("Default switch-case"),e.abrupt("break",19);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(0),console.log("An error was caught: ",e.t1);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"selectCom1",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AskUserForComport(1);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectCom2",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.AskUserForComport(2);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareComPortSelectButtons",value:function(){return console.log("Create Message box"),!1===this.state.p1.selected?Object(n.jsx)("div",{className:"parentMessageBox",children:Object(n.jsx)("div",{className:"messageBoxSelectButton",onClick:this.selectCom1},"c1")}):null}},{key:"render",value:function(){return console.log("render...."),Object(n.jsxs)("div",{children:[Object(n.jsx)(x,{}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(C.c,{children:[Object(n.jsx)(C.a,{path:"/contact",children:Object(n.jsx)(S,{})}),Object(n.jsxs)(C.a,{children:[this.prepareComPortSelectButtons(),Object(n.jsx)(b.a,{container:!0,justify:"center",children:Object(n.jsx)(b.a,{item:!0,xs:12,children:Object(n.jsx)("div",{children:!0===this.state.p1.selected?Object(n.jsx)(O,{port:this.state.p1}):null})})})]})]})})]})}}]),s}(i.Component),y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,66)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),i(e),a(e),r(e)}))};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root")),y()}},[[49,1,2]]]);
//# sourceMappingURL=main.361f72a6.chunk.js.map